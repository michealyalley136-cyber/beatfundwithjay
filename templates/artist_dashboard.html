{% extends "base.html" %}
{% block title %}Artist Dashboard Â· BeatFund{% endblock %}

{% block content %}
<div class="dashboard" data-role="artist">

  <!-- HERO -->
  <div class="dash-hero">
    <div class="dash-hero-card">
      <div class="dash-identity">
        {# Avatar (safe defaults) #}
        {% set avatar_url = (current_user.avatar_url|default('', true)) %}
        {% if avatar_url %}
          <img class="avatar avatar-lg" src="{{ avatar_url }}" alt="Avatar">
        {% else %}
          <div class="avatar avatar-lg avatar-fallback">
            {{ (current_user.username[:1] if current_user.username else 'A')|upper }}
          </div>
        {% endif %}

        <div class="dash-identity-text">
          <div class="dash-kicker">Dashboard</div>

          <div class="dash-name-row">
            <h1 class="dash-name">{{ current_user.display_name|default(current_user.username, true) }}</h1>
            <span class="role-pill">ARTIST</span>
          </div>

          <div class="muted dash-handle">@{{ current_user.username }}</div>
          {% if current_user.location %}
            <div class="muted dash-loc">{{ current_user.location }}</div>
          {% endif %}
        </div>
      </div>

      <div class="dash-actions">
        <a class="btn btn-primary" href="{{ url_for('wallet_home') }}">Open Wallet</a>
        <a class="btn btn-secondary" href="{{ url_for('market_index') }}">Go to Market</a>
        <a class="btn btn-ghost" href="{{ url_for('bookme_search') }}">BookMe</a>
      </div>
    </div>

    <!-- STATS -->
    <div class="stats-grid">
      <div class="stat">
        <div class="stat-label">Wallet Balance</div>
        <div class="stat-value">${{ (wallet_balance|default(0, true)) }}</div>
        <div class="muted">Available funds</div>
      </div>

      <div class="stat">
        <div class="stat-label">Bookings</div>
        <div class="stat-value">{{ (booking_count|default(0, true)) }}</div>
        <div class="muted">Total requests</div>
      </div>

      <div class="stat">
        <div class="stat-label">Market Orders</div>
        <div class="stat-value">{{ (order_count|default(0, true)) }}</div>
        <div class="muted">Purchases made</div>
      </div>

      <div class="stat">
        <div class="stat-label">Profile Status</div>
        <div class="stat-value">{{ (profile_status|default("New", true)) }}</div>
        <div class="muted">Complete it for trust</div>
      </div>
    </div>
  </div>

  <!-- MAIN GRID -->
  <div class="dash-grid">

    <!-- LEFT -->
    <div class="dash-col">
      <div class="card">
        <div class="card-head">
          <h2 class="card-title">Quick Actions</h2>
        </div>

        <div class="action-grid">
          <a class="action-card" href="{{ url_for('wallet_home') }}">
            <div class="action-title">Wallet</div>
            <div class="muted">Deposit, withdraw, transactions</div>
          </a>

          <a class="action-card" href="{{ url_for('bookme_search') }}">
            <div class="action-title">BookMe</div>
            <div class="muted">Find & book creators</div>
          </a>

          <a class="action-card" href="{{ url_for('market_index') }}">
            <div class="action-title">Market</div>
            <div class="muted">Buy beats & services</div>
          </a>

          <a class="action-card" href="{{ url_for('opportunities') }}">
            <div class="action-title">Opportunities</div>
            <div class="muted">Grants, gigs, listings</div>
          </a>
        </div>
      </div>

      <div class="card">
        <div class="card-head">
          <h2 class="card-title">Getting Started</h2>
        </div>

        <div class="muted">Use this checklist so your account looks legit + converts better.</div>

        <ul class="steps">
          <li>Upload a profile photo + display name</li>
          <li>Add a short bio and your location</li>
          <li>Fund your wallet (even a small amount)</li>
          <li>Explore BookMe + Market</li>
        </ul>
      </div>
    </div>

    <!-- RIGHT -->
    <div class="dash-col">
      <div class="card">
        <div class="card-head">
          <h2 class="card-title">Suggested</h2>
        </div>

        <div class="suggested-list">
          <div class="suggested-row">
            <a class="suggested-left" href="{{ url_for('producer_catalog_index') }}">
              <div class="suggested-meta">
                <div class="suggested-name">Browse top producers</div>
                <div class="muted">Find beats by genre & vibe</div>
              </div>
            </a>
            <div class="suggested-actions">
              <a class="btn btn-ghost" href="{{ url_for('producer_catalog_index') }}">Open</a>
            </div>
          </div>

          <div class="suggested-row">
            <a class="suggested-left" href="{{ url_for('opportunities') }}">
              <div class="suggested-meta">
                <div class="suggested-name">Opportunities</div>
                <div class="muted">Gigs, grants, collabs</div>
              </div>
            </a>
            <div class="suggested-actions">
              <a class="btn btn-ghost" href="{{ url_for('opportunities') }}">View</a>
            </div>
          </div>

        </div>
      </div>

      <div class="card">
        <div class="card-head">
          <h2 class="card-title">Account</h2>
        </div>
        <div class="muted">More account settings can go here later (KYC, payouts, etc.).</div>
      </div>
    </div>

  </div>
</div>
{% endblock %}
