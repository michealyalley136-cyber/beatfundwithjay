{% extends "base_admin.html" %}

{% block title %}Waitlist — Admin{% endblock %}

{% block admin_content %}
<div style="max-width: 1200px; margin: 0 auto;">
  <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
    <h1 style="font-size: 24px; font-weight: 600; margin: 0;">Waitlist Entries</h1>
    <div style="display: flex; gap: 12px; align-items: center;">
      <div style="font-size: 14px; color: #9aa4c2;">
        Total: <strong>{{ total_count }}</strong> entries
      </div>
      <a href="{{ url_for('admin_waitlist_export') }}" 
         style="padding: 8px 16px; background: linear-gradient(135deg, #4de3ff, #6366f1); color: white; text-decoration: none; border-radius: 8px; font-size: 13px; font-weight: 500;">
        Export CSV
      </a>
    </div>
  </div>

  {% if entries %}
  <div style="background: rgba(15, 23, 42, 0.96); border: 1px solid rgba(148, 163, 184, 0.4); border-radius: 12px; overflow: hidden;">
    <table style="width: 100%; border-collapse: collapse;">
      <thead>
        <tr style="background: rgba(30, 64, 175, 0.3); border-bottom: 1px solid rgba(148, 163, 184, 0.4);">
          <th style="padding: 12px 16px; text-align: left; font-size: 12px; font-weight: 600; color: #cbd5f5; text-transform: uppercase; letter-spacing: 0.05em;">ID</th>
          <th style="padding: 12px 16px; text-align: left; font-size: 12px; font-weight: 600; color: #cbd5f5; text-transform: uppercase; letter-spacing: 0.05em;">Email</th>
          <th style="padding: 12px 16px; text-align: left; font-size: 12px; font-weight: 600; color: #cbd5f5; text-transform: uppercase; letter-spacing: 0.05em;">Full Name</th>
          <th style="padding: 12px 16px; text-align: left; font-size: 12px; font-weight: 600; color: #cbd5f5; text-transform: uppercase; letter-spacing: 0.05em;">Role Interest</th>
          <th style="padding: 12px 16px; text-align: left; font-size: 12px; font-weight: 600; color: #cbd5f5; text-transform: uppercase; letter-spacing: 0.05em;">Note</th>
          <th style="padding: 12px 16px; text-align: left; font-size: 12px; font-weight: 600; color: #cbd5f5; text-transform: uppercase; letter-spacing: 0.05em;">IP</th>
          <th style="padding: 12px 16px; text-align: left; font-size: 12px; font-weight: 600; color: #cbd5f5; text-transform: uppercase; letter-spacing: 0.05em;">Created At</th>
        </tr>
      </thead>
      <tbody>
        {% for entry in entries %}
        <tr style="border-bottom: 1px solid rgba(148, 163, 184, 0.2);">
          <td style="padding: 12px 16px; font-size: 13px; color: #9aa4c2;">{{ entry.id }}</td>
          <td style="padding: 12px 16px; font-size: 13px; color: #ffffff; font-weight: 500;">{{ entry.email }}</td>
          <td style="padding: 12px 16px; font-size: 13px; color: #cbd5f5;">{{ entry.full_name or "—" }}</td>
          <td style="padding: 12px 16px; font-size: 13px; color: #cbd5f5;">
            {% if entry.role_interest %}
              <span style="padding: 2px 8px; background: rgba(59, 130, 246, 0.2); border-radius: 4px; text-transform: capitalize;">{{ entry.role_interest }}</span>
            {% else %}
              —
            {% endif %}
          </td>
          <td style="padding: 12px 16px; font-size: 13px; color: #9aa4c2; max-width: 200px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
            {{ entry.note or "—" }}
          </td>
          <td style="padding: 12px 16px; font-size: 12px; color: #9aa4c2; font-family: monospace;">{{ entry.ip or "—" }}</td>
          <td style="padding: 12px 16px; font-size: 12px; color: #9aa4c2;">
            {% if entry.created_at %}
              {{ entry.created_at.strftime('%Y-%m-%d %H:%M') }}
            {% else %}
              —
            {% endif %}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% else %}
  <div style="padding: 48px; text-align: center; background: rgba(15, 23, 42, 0.96); border: 1px solid rgba(148, 163, 184, 0.4); border-radius: 12px;">
    <p style="font-size: 14px; color: #9aa4c2; margin: 0;">No waitlist entries yet.</p>
  </div>
  {% endif %}
</div>
{% endblock %}
