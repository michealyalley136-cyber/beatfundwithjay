{% extends "base.html" %}
{% block title %}@{{ producer.username }}{% endblock %}
{% block content %}
<h2>@{{ producer.username }} · Producer</h2>

<div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:14px;margin-top:10px;">
  {% for b in items %}
  <div style="border:1px solid #eee;padding:12px;border-radius:10px;background:#fff">
    <img src="{{ url_for('media_file', filename=b.cover_path) if b.cover_path else url_for('static','placeholder.png') }}"
         onerror="this.src='{{ url_for('static', 'placeholder.png') }}'"
         alt="cover" style="width:100%;height:150px;object-fit:cover;border-radius:8px;">
    <div style="margin-top:8px;font-weight:700">{{ b.title }}</div>
    <div style="font-size:.9rem;color:#566">{{ b.genre or '—' }} • {{ b.bpm or '—' }} BPM</div>
    <div style="font-size:.95rem;color:#111">${{ '%.2f'|format(b.price_cents/100) }}</div>
    {% if b.preview_url %}
      <audio controls src="{{ b.preview_url }}" style="width:100%;margin-top:6px"></audio>
    {% endif %}
    <a href="{{ url_for('market_index') }}" class="btn" style="margin-top:8px;display:inline-block;background:#007bff;color:#fff;padding:8px 12px;border-radius:8px;text-decoration:none;">Open Marketplace</a>
  </div>
  {% else %}
    <p>No active beats from this producer.</p>
  {% endfor %}
</div>
{% endblock %}
