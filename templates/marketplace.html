<!DOCTYPE html>
<html>
<head>
    <title>Beat Marketplace</title>
    <style>
        body { font-family: Arial; background: #f4f4f4; padding: 20px; }
        .header { background: #1a1a1a; color: white; padding: 20px; text-align: center; border-radius: 10px; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; margin: 20px 0; }
        .beat { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .price { font-size: 1.5em; color: #2ed573; font-weight: bold; }
        .btn { background: #00d4ff; color: black; padding: 10px; text-decoration: none; border-radius: 5px; font-weight: bold; }
    </style>
</head>
<body>
    <div class="header">
        <h1>Beat Marketplace</h1>
        <p><a href="{{ url_for('upload_beat') }}" style="color:#00d4ff;">Upload Beat</a> | 
           <a href="{{ url_for('dashboard') }}" style="color:#00d4ff;">Dashboard</a></p>
    </div>

    <div class="grid">
        {% for beat in beats %}
        <div class="beat">
            <h3>{{ beat.title }}</h3>
            <p>{{ beat.description|truncate(100) }}</p>
            <p class="price">${{ "%.2f"|format(beat.price) }}</p>
            <audio controls style="width:100%;">
                <source src="{{ url_for('downloaded_beat', filename=beat.file_path) }}" type="audio/mpeg">
            </audio>
            <br><br>
            <a href="{{ url_for('buy_beat', beat_id=beat.id) }}" class="btn">Buy Now</a>
        </div>
        {% else %}
        <p>No beats available.</p>
        {% endfor %}
    </div>
</body>
</html>