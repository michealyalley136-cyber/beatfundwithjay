{% extends "base.html" %}
{% block title %}Content Calendar · Social Media Manager{% endblock %}

{% block extra_head %}
<style>
  .smm-page {
    max-width: 1400px;
    margin: 0 auto;
    padding: 20px 16px;
  }

  .smm-nav {
    display: flex;
    gap: 12px;
    flex-wrap: wrap;
    margin-bottom: 24px;
    padding-bottom: 16px;
    border-bottom: 1px solid rgba(255,255,255,.1);
  }

  .smm-nav a {
    padding: 10px 16px;
    border-radius: 10px;
    text-decoration: none;
    font-weight: 600;
    font-size: 14px;
    color: #cbd5f5;
    background: rgba(255,255,255,.05);
    border: 1px solid rgba(255,255,255,.1);
    transition: all 0.2s ease;
  }

  .smm-nav a:hover {
    background: rgba(255,255,255,.1);
  }

  .smm-nav a.active {
    background: linear-gradient(135deg, rgba(6,182,212,.3), rgba(34,197,94,.2));
    border-color: rgba(6,182,212,.5);
    color: #fff;
  }

  .smm-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 24px;
    flex-wrap: wrap;
    gap: 16px;
  }

  .smm-title {
    font-size: 1.75rem;
    font-weight: 800;
    margin: 0;
  }

  .smm-view-toggle {
    display: flex;
    gap: 8px;
    background: rgba(255,255,255,.05);
    padding: 4px;
    border-radius: 10px;
    border: 1px solid rgba(255,255,255,.1);
  }

  .smm-view-toggle a {
    padding: 8px 16px;
    border-radius: 8px;
    text-decoration: none;
    font-weight: 600;
    font-size: .9rem;
    color: #cbd5f5;
    transition: all 0.2s ease;
  }

  .smm-view-toggle a.active {
    background: rgba(6,182,212,.3);
    color: #fff;
  }

  .smm-calendar-table {
    width: 100%;
    border-collapse: collapse;
    background: rgba(255,255,255,.06);
    border: 1px solid rgba(255,255,255,.12);
    border-radius: 18px;
    overflow: hidden;
  }

  .smm-calendar-table th {
    padding: 16px;
    text-align: left;
    font-weight: 700;
    background: rgba(255,255,255,.08);
    border-bottom: 1px solid rgba(255,255,255,.1);
  }

  .smm-calendar-table td {
    padding: 16px;
    border-bottom: 1px solid rgba(255,255,255,.08);
  }

  .smm-calendar-table tr:last-child td {
    border-bottom: none;
  }

  .smm-calendar-item {
    padding: 12px;
    border-radius: 10px;
    background: rgba(6,182,212,.1);
    border: 1px solid rgba(6,182,212,.2);
    margin-bottom: 8px;
  }

  .smm-calendar-item-title {
    font-weight: 700;
    margin-bottom: 4px;
  }

  .smm-calendar-item-meta {
    font-size: .85rem;
    opacity: .8;
  }

  .smm-chip {
    display: inline-flex;
    align-items: center;
    padding: 4px 10px;
    border-radius: 999px;
    background: rgba(6,182,212,.2);
    border: 1px solid rgba(6,182,212,.4);
    font-size: .8rem;
    margin-left: 8px;
    text-transform: capitalize;
  }
</style>
{% endblock %}

{% block content %}
<div class="smm-page">
  <nav class="smm-nav">
    <a href="{{ url_for('social_dashboard') }}">Dashboard</a>
    <a href="{{ url_for('social_clients') }}">Clients</a>
    <a href="{{ url_for('social_calendar') }}" class="active">Content Calendar</a>
    <a href="{{ url_for('social_posts') }}">Posts & Assets</a>
    <a href="{{ url_for('social_approvals') }}">Approvals</a>
    <a href="{{ url_for('social_analytics') }}">Analytics</a>
    <a href="{{ url_for('social_availability') }}">Availability</a>
    <a href="{{ url_for('social_earnings') }}">Earnings</a>
    <a href="{{ url_for('social_reviews') }}">Reviews</a>
    <a href="{{ url_for('social_settings') }}">Settings</a>
  </nav>

  <div class="smm-header">
    <h1 class="smm-title">Content Calendar</h1>
    <div class="smm-view-toggle">
      <a href="{{ url_for('social_calendar', view='week') }}" class="{% if view == 'week' %}active{% endif %}">Week</a>
      <a href="{{ url_for('social_calendar', view='month') }}" class="{% if view == 'month' %}active{% endif %}">Month</a>
    </div>
  </div>

  {% if view == 'month' %}
    <table class="smm-calendar-table">
      <thead>
        <tr>
          <th>Date</th>
          <th>Time</th>
          <th>Title</th>
          <th>Platform</th>
          <th>Client</th>
        </tr>
      </thead>
      <tbody>
        {% if calendar_items %}
          {% for item in calendar_items %}
            <tr>
              <td>{{ item.scheduled_date.strftime('%b %d, %Y') }}</td>
              <td>{% if item.scheduled_time %}{{ item.scheduled_time.strftime('%I:%M %p') }}{% else %}—{% endif %}</td>
              <td>{{ item.title }}</td>
              <td>{% if item.platform %}<span class="smm-chip">{{ item.platform }}</span>{% else %}—{% endif %}</td>
              <td>{% if item.client %}{{ item.client.client_name }}{% else %}—{% endif %}</td>
            </tr>
          {% endfor %}
        {% else %}
          <tr>
            <td colspan="5" style="text-align: center; opacity: .8; padding: 40px;">No scheduled items for this period.</td>
          </tr>
        {% endif %}
      </tbody>
    </table>
  {% else %}
    <table class="smm-calendar-table">
      <thead>
        <tr>
          <th>Date</th>
          <th>Time</th>
          <th>Title</th>
          <th>Platform</th>
          <th>Client</th>
        </tr>
      </thead>
      <tbody>
        {% if calendar_items %}
          {% for item in calendar_items %}
            <tr>
              <td>{{ item.scheduled_date.strftime('%b %d, %Y') }}</td>
              <td>{% if item.scheduled_time %}{{ item.scheduled_time.strftime('%I:%M %p') }}{% else %}—{% endif %}</td>
              <td>{{ item.title }}</td>
              <td>{% if item.platform %}<span class="smm-chip">{{ item.platform }}</span>{% else %}—{% endif %}</td>
              <td>{% if item.client %}{{ item.client.client_name }}{% else %}—{% endif %}</td>
            </tr>
          {% endfor %}
        {% else %}
          <tr>
            <td colspan="5" style="text-align: center; opacity: .8; padding: 40px;">No scheduled items for this week.</td>
          </tr>
        {% endif %}
      </tbody>
    </table>
  {% endif %}
</div>
{% endblock %}

