<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>{% block title %}BeatFund{% endblock %}</title>

    {# Main theme CSS #}
    <link rel="stylesheet" href="{{ url_for('static', filename='app.css') }}">

    {% block extra_head %}{% endblock %}
</head>
<body>
<header class="top-nav">
    <div class="nav-left">
        {# Simple text brand only â€“ no circle, no SVG #}
        <div class="brand-text">
            <div class="brand-main">BEATFUND</div>
            <div class="brand-sub">
                {# Admin subtitle for admins, global tagline for everyone else #}
                {% if current_user.is_authenticated and current_user.role == RoleEnum.admin %}
                    Admin
                {% else %}
                    Fintech for Creators
                {% endif %}
            </div>
        </div>
    </div>

    <nav class="nav-center">
        {# Show the admin tabs only when an admin is logged in #}
        {% if current_user.is_authenticated and current_user.role == RoleEnum.admin %}
            <a href="{{ url_for('admin_dashboard') }}">Admin Dashboard</a>
            <a href="{{ url_for('admin_users') }}">Users</a>
            <a href="{{ url_for('admin_kyc') }}">KYC Queue</a>
            <a href="{{ url_for('admin_transactions') }}">Transactions</a>
            <a href="{{ url_for('admin_tickets') }}">Tickets</a>
            <a href="{{ url_for('admin_reports') }}">Reports</a>

            {# Only the superadmin (owner) sees Admin Team #}
            {% if current_user.is_superadmin %}
                <a href="{{ url_for('admin_team') }}">Admin Team</a>
            {% endif %}
        {% endif %}
    </nav>

    <div class="nav-right">
        {% if current_user.is_authenticated %}
            <span class="nav-username">@{{ current_user.username }}</span>
            <a href="{{ url_for('route_to_dashboard') }}">Dashboard</a>
            <a href="{{ url_for('logout') }}">Log out</a>
        {% else %}
            <a href="{{ url_for('login') }}">Log in</a>
            <a href="{{ url_for('register') }}">Sign up</a>
        {% endif %}
    </div>
</header>

<main class="page-main">
    {% with msgs = get_flashed_messages(with_categories=true) %}
      {% if msgs %}
        <div class="flash-container">
          {% for category, msg in msgs %}
            <div class="flash flash-{{ category }}">{{ msg }}</div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    {% block content %}{% endblock %}
</main>
</body>
</html>
